{"version":3,"sources":["scripts/main.js"],"names":["board","score","document","querySelector","cells","querySelectorAll","button","messageWin","messageLose","messageStart","rows","columns","setGame","i","r","c","id","toString","num","updateTile","setTwo","hasEmptyTile","isFound","Math","floor","random","tile","getElementById","innerText","classList","add","lose","win","filterZero","row","filter","slide","roww","length","textContent","push","value","slideLeft","slideRight","reverse","slideUp","slideDown","remove","addEventListener","e","code"],"mappings":"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","file":"main.f07ab114.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\n\r\nconst score = document.querySelector('.game-score');\r\nconst cells = document.querySelectorAll('.field-cell');\r\nconst button = document.querySelector('.button');\r\nconst messageWin = document.querySelector('.message-win');\r\nconst messageLose = document.querySelector('.message-lose');\r\nconst messageStart = document.querySelector('.message-start');\r\n\r\nlet board;\r\nconst rows = 4;\r\nconst columns = 4;\r\n\r\nbutton.addEventListener('click', () => {\r\n  button.classList.remove('start');\r\n  button.classList.add('restart');\r\n  button.textContent = 'Restart';\r\n  score.textContent = '0';\r\n  messageStart.classList.add('hidden');\r\n  messageLose.classList.add('hidden');\r\n  messageStart.classList.add('hidden');\r\n\r\n  setGame();\r\n});\r\n\r\nfunction setGame() {\r\n  board = [\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0],\r\n    [0, 0, 0, 0],\r\n  ];\r\n\r\n  let i = 0;\r\n\r\n  for (let r = 0; r < rows; r++) {\r\n    for (let c = 0; c < columns; c++) {\r\n      cells[i].id = r.toString() + '-' + c.toString();\r\n\r\n      const num = board[r][c];\r\n\r\n      updateTile(cells[i], num);\r\n\r\n      i++;\r\n    }\r\n  }\r\n\r\n  setTwo();\r\n  setTwo();\r\n}\r\n\r\nfunction hasEmptyTile() {\r\n  for (let r = 0; r < rows; r++) {\r\n    for (let c = 0; c < columns; c++) {\r\n      if (board[r][c] === 0) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction setTwo() {\r\n  if (!hasEmptyTile()) {\r\n    return;\r\n  }\r\n\r\n  let isFound = false;\r\n\r\n  while (!isFound) {\r\n    const r = Math.floor(Math.random() * rows);\r\n    const c = Math.floor(Math.random() * columns);\r\n\r\n    if (board[r][c] === 0) {\r\n      board[r][c] = Math.random() < 0.1 ? 4 : 2;\r\n\r\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\r\n\r\n      tile.innerText = '2';\r\n      tile.classList.add('field-cell--2');\r\n      isFound = true;\r\n    }\r\n  }\r\n  lose();\r\n  win();\r\n}\r\n\r\ndocument.addEventListener('keyup', (e) => {\r\n  if (e.code === 'ArrowLeft') {\r\n    slideLeft();\r\n    setTwo();\r\n  } else if (e.code === 'ArrowRight') {\r\n    slideRight();\r\n    setTwo();\r\n  } else if (e.code === 'ArrowUp') {\r\n    slideUp();\r\n    setTwo();\r\n  } else if (e.code === 'ArrowDown') {\r\n    slideDown();\r\n    setTwo();\r\n  }\r\n});\r\n\r\nfunction filterZero(row) {\r\n  return row.filter(num => num !== 0);\r\n}\r\n\r\nfunction slide(row) {\r\n  let roww = filterZero(row);\r\n\r\n  for (let i = 0; i < roww.length; i++) {\r\n    if (roww[i] === roww[i + 1]) {\r\n      roww[i] *= 2;\r\n      roww[i + 1] = 0;\r\n      score.textContent = `${+score.textContent + roww[i]}`;\r\n    }\r\n  }\r\n\r\n  roww = filterZero(roww);\r\n\r\n  while (roww.length < columns) {\r\n    roww.push(0);\r\n  }\r\n\r\n  return roww;\r\n}\r\n\r\nfunction updateTile(tile, num) {\r\n  tile.innerText = '';\r\n  tile.classList.value = '';\r\n  tile.classList.add('field-cell');\r\n\r\n  if (num > 0) {\r\n    tile.innerText = num;\r\n    tile.classList.add(`field-cell--${num}`);\r\n  }\r\n}\r\n\r\nfunction slideLeft() {\r\n  for (let r = 0; r < rows; r++) {\r\n    let row = board[r];\r\n\r\n    row = slide(row);\r\n    board[r] = row;\r\n\r\n    for (let c = 0; c < columns; c++) {\r\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\r\n      const num = board[r][c];\r\n\r\n      updateTile(tile, num);\r\n    }\r\n  }\r\n}\r\n\r\nfunction slideRight() {\r\n  for (let r = 0; r < rows; r++) {\r\n    let row = board[r];\r\n\r\n    row.reverse();\r\n    row = slide(row);\r\n    row.reverse();\r\n    board[r] = row;\r\n\r\n    for (let c = 0; c < columns; c++) {\r\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\r\n      const num = board[r][c];\r\n\r\n      updateTile(tile, num);\r\n    }\r\n  }\r\n}\r\n\r\nfunction slideUp() {\r\n  for (let c = 0; c < columns; c++) {\r\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\r\n\r\n    row = slide(row);\r\n    board[0][c] = row[0];\r\n    board[1][c] = row[1];\r\n    board[2][c] = row[2];\r\n    board[3][c] = row[3];\r\n\r\n    for (let r = 0; r < rows; r++) {\r\n      const tile = document.getElementById(`${r}-${c}`);\r\n      const num = board[r][c];\r\n\r\n      updateTile(tile, num);\r\n    }\r\n  }\r\n}\r\n\r\nfunction slideDown() {\r\n  for (let c = 0; c < columns; c++) {\r\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\r\n\r\n    row.reverse();\r\n    row = slide(row);\r\n    row.reverse();\r\n    board[0][c] = row[0];\r\n    board[1][c] = row[1];\r\n    board[2][c] = row[2];\r\n    board[3][c] = row[3];\r\n\r\n    for (let r = 0; r < rows; r++) {\r\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\r\n      const num = board[r][c];\r\n\r\n      updateTile(tile, num);\r\n    }\r\n  }\r\n}\r\n\r\nfunction lose() {\r\n  if (hasEmptyTile()) {\r\n    return;\r\n  }\r\n\r\n  for (let r = 0; r < rows; r++) {\r\n    for (let c = 0; c < columns - 1; c++) {\r\n      if (board[c][r] === board[c + 1][r] || board[r][c] === board[r][c + 1]) {\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  messageLose.classList.remove('hidden');\r\n}\r\n\r\nfunction win() {\r\n  for (let r = 0; r < rows; r++) {\r\n    for (let c = 0; c < columns; c++) {\r\n      if (board[r][c] === 2048) {\r\n        messageWin.classList.remove('hidden');\r\n      }\r\n    }\r\n  }\r\n}\r\n"]}